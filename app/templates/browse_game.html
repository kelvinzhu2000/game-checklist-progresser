{% extends "base.html" %}

{% block title %}{{ game.name }} Checklists - Game Checklist Progresser{% endblock %}

{% block content %}
<div class="page-header">
    <h1>Browse Checklists - {{ game.name }}</h1>
    <div class="game-context">
        <p>Viewing public checklists for: <strong>{{ game.name }}</strong></p>
        <a href="{{ url_for('main.browse') }}" class="btn btn-secondary">Back to Games</a>
    </div>
</div>

{% if pagination.items %}
<div class="checklist-grid">
    {% for checklist in pagination.items %}
    <div class="checklist-card">
        <h3><a href="{{ url_for('checklist.view', checklist_id=checklist.id) }}">{{ checklist.title }}</a></h3>
        <p class="game-name">{{ checklist.game.name }}</p>
        {% if checklist.description %}
            <p class="description">{{ checklist.description[:100] }}{% if checklist.description|length > 100 %}...{% endif %}</p>
        {% endif %}
        <p class="creator">By {{ checklist.creator.username }}</p>
        <p class="item-count">{{ checklist.items.count() }} items</p>
        {% if current_user.is_authenticated %}
        <form method="POST" action="{{ url_for('checklist.copy', checklist_id=checklist.id) }}" style="margin-top: 0.5rem;">
            <button type="submit" class="btn btn-success">Copy to My Checklists</button>
        </form>
        {% endif %}
    </div>
    {% endfor %}
</div>

<div class="pagination">
    {% if pagination.has_prev %}
        <a href="{{ url_for('main.browse_game', game_id=game.id, page=pagination.prev_num) }}" class="btn">Previous</a>
    {% endif %}
    
    <span>Page {{ pagination.page }} of {{ pagination.pages }}</span>
    
    {% if pagination.has_next %}
        <a href="{{ url_for('main.browse_game', game_id=game.id, page=pagination.next_num) }}" class="btn">Next</a>
    {% endif %}
</div>
{% else %}
<p>No public checklists found for this game.</p>
{% endif %}
{% endblock %}
